<html>
  <head>
    <title>Solar PV Daily Statistics</title>
    <script>
      function dirstr (yr, mo) {
          return yr.toString ().padStart (4, "0") + "/" + mo.toString ().padStart (2, "0") + "/";
      }
      function datestr (yr, mo) {
          return yr.toString ().padStart (4, "0") + mo.toString ().padStart (2, "0");
      }
      function load (yr, mo) {
          document.getElementById ("mon").value = mo;
          document.getElementById ("year").value = yr;
          let dir = dirstr (yr, mo);
          let when = datestr (yr, mo);
          document.getElementById ("consume").src = dir + "Monthly_Consume_" + when + ".png";
          document.getElementById ("supply").src = dir + "Monthly_Supply_" + when + ".png";
          document.getElementById ("produce").src = dir + "Monthly_Produce_" + when + ".png";
      }
      function update () {
          mo = document.getElementById ("mon").value;
          yr = document.getElementById ("year").value;
          load (yr, mo);
      }
      function yesterday () {
          let yd = new Date (Date.now () - 86400000);
          let mo = yd.getMonth () + 1;
          let yr = yd.getFullYear ();
          load (yr, mo);
      }
    </script>
    <style>
      h1 {
          text-align: center;
      }
      #menu {
          margin: auto;
          border-collapse: collapse;
          border: 1px solid black;
      }
      #menu td {
          border: 1px solid black;
          padding: 2px 10px;
      }
      form {
          margin: auto;
      }
    </style>
  </head>
  <body onload="yesterday ();">
    <table id="menu"><tr>
      <td><a href="/">Live Data</a></td>
      <td><a href="daily.html">Daily Statistics</a></td>
    </tr></table>
    <h1>Monthly Solar PV Statistics</h1>
    <form>
      <select id="mon" onchange="update ();">
        <option value="01">January</option>
        <option value="02">Febuary</option>
        <option value="03">March</option>
        <option value="04">April</option>
        <option value="05">May</option>
        <option value="06">June</option>
        <option value="07">July</option>
        <option value="08">August</option>
        <option value="09">September</option>
        <option value="10">October</option>
        <option value="11">November</option>
        <option value="12">December</option>
      </select>
      <select id="year" onchange="update ();">
        <option value="2022">2022</option>
        <option value="2023">2023</option>
        <option value="2024">2024</option>
        <option value="2025">2025</option>
        <option value="2026">2026</option>
        <option value="2027">2027</option>
        <option value="2028">2028</option>
        <option value="2029">2029</option>
        <option value="2030">2030</option>
        <option value="2031">2031</option>
      </select>
    </form>
    <h2>Consumed Energy (By: <span style="color: #00FF00;">House</span>,
      <span style="color: #FFFF00;">Inverter</span>)</h2>
    <img id="consume">
    <h2>Energy Supply (Source: <span style="color: #00FF00;">Solar</span>,
      <span style="color: #0000FF;">Battery</span>,
      <span style="color: #FF0000;">Grid</span>)</h2>
    <img id="supply">
    <h2>Produced Energy (Used by: <span style="color: #00FF00;">House</span>,
        <span style="color: #FFFF00;">Inverter</span>,
        <span style="color: #0000FF;">Battery</span>,
        <span style="color: #FF0000;">Grid</span>)</h2>
    <img id="produce">
  </body>
</html>
